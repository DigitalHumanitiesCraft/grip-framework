<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apparat - Edition - GRIP Framework</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/reader.css">
    <link rel="stylesheet" href="../../css/specializations/edition.css">
    <link rel="stylesheet" href="../../css/modes/edition-apparat.css">
</head>
<body>
    <header class="demo-header reader-header edition-header">
        <a href="../../index.html" class="back-link">&larr; Zur Matrix</a>
        <div class="header-main">
            <h1>Edition</h1>
            <span class="mode-badge">Apparat-Modus</span>
        </div>
        <p>Lesetext mit kritischem Apparat</p>
    </header>

    <!-- Modus-Navigation -->
    <nav class="mode-tabs" role="tablist">
        <a href="synopse.html" role="tab">Synopse</a>
        <a href="apparat.html" role="tab" aria-selected="true" class="active">Apparat</a>
        <a href="genetik.html" role="tab">Genetik</a>
        <a href="faksimile.html" role="tab">Faksimile</a>
    </nav>

    <main class="apparat-layout">
        <!-- Sidebar: Navigation + Filter -->
        <aside class="apparat-sidebar">
            <div class="text-nav">
                <h2>Textstruktur</h2>
                <nav class="section-nav" id="section-nav">
                    <!-- Dynamisch: Kapitel/Abschnitte -->
                </nav>
            </div>

            <div class="witness-filter">
                <h3>Zeugenfilter</h3>
                <div class="filter-checkboxes" id="witness-filter">
                    <!-- Dynamisch: Checkboxen pro Zeugengruppe -->
                </div>
            </div>

            <div class="display-options">
                <h3>Anzeige</h3>
                <label class="checkbox-label">
                    <input type="checkbox" id="show-hover-preview" checked>
                    Hover-Preview
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="show-line-numbers" checked>
                    Zeilennummern
                </label>
            </div>

            <div class="siglen-legend">
                <h3>Siglenliste</h3>
                <dl id="siglen-list">
                    <!-- Dynamisch: Siglum → Repository -->
                </dl>
            </div>
        </aside>

        <!-- Hauptbereich: Text + Apparat -->
        <article class="apparat-content">
            <header class="text-header">
                <h2 id="text-title">Werktitel</h2>
                <div class="base-witness-select">
                    <label>Leithandschrift:</label>
                    <select id="base-witness">
                        <!-- Dynamisch -->
                    </select>
                </div>
            </header>

            <!-- Lesetext mit Lemma-Markierungen -->
            <div class="reading-text" id="reading-text">
                <!-- Dynamisch: Text mit <span class="lemma" data-app="1"> -->
            </div>

            <!-- Kritischer Apparat -->
            <div class="apparatus-panel" id="apparatus-panel">
                <h3>Kritischer Apparat</h3>
                <div class="apparatus-entries" id="apparatus-entries">
                    <!-- Dynamisch:
                    <div class="app-entry" data-app="1">
                        <span class="line-ref">1</span>
                        <span class="lemma">Lemma]</span>
                        <span class="readings">Variante A; Variante B</span>
                    </div>
                    -->
                </div>
            </div>
        </article>

        <!-- Kontext-Panel: Aktive Variante -->
        <aside class="apparat-context">
            <section class="variant-detail">
                <h2>Variante</h2>
                <p class="variant-prompt" id="variant-prompt">Klicken Sie auf ein Lemma im Text oder Apparat.</p>

                <div class="variant-info hidden" id="variant-info">
                    <div class="lemma-display">
                        <h3>Lemma</h3>
                        <p id="variant-lemma" class="lemma-text"></p>
                    </div>

                    <div class="readings-display">
                        <h3>Lesarten</h3>
                        <table class="readings-table">
                            <thead>
                                <tr>
                                    <th>Siglum</th>
                                    <th>Text</th>
                                    <th>Typ</th>
                                </tr>
                            </thead>
                            <tbody id="readings-body">
                                <!-- Dynamisch -->
                            </tbody>
                        </table>
                    </div>

                    <div class="editorial-note hidden" id="editorial-note">
                        <h3>Editorische Anmerkung</h3>
                        <p id="note-text"></p>
                    </div>
                </div>
            </section>

            <section class="stats-panel">
                <h3>Statistik</h3>
                <dl class="stats-list">
                    <dt>Varianten gesamt</dt>
                    <dd id="stat-total">-</dd>
                    <dt>Substantive</dt>
                    <dd id="stat-substantive">-</dd>
                    <dt>Orthografische</dt>
                    <dd id="stat-orthographic">-</dd>
                </dl>
            </section>
        </aside>
    </main>

    <footer class="demo-footer reader-footer">
        <div class="mode-info">
            <h3>Apparat-Modus</h3>
            <p><strong>Relevanz:</strong> Klassische Editionsform. Lesetext oben, Varianten unten. Für lineare Lektüre mit optionalem Detailzugriff.</p>
            <p><strong>Innovation:</strong> Hover-Preview zeigt Varianten inline ohne Scrollsprung. Variantenfilter nach Zeugengruppen reduziert Komplexität.</p>
        </div>
        <a href="../reader-edition.html" class="back-to-spec reader-btn">Zur Spezialisierung</a>
    </footer>

    <script type="module" src="../../js/modes/edition-apparat.js"></script>
</body>
</html>
